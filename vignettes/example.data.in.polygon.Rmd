--- 
title: "get all sites within a polygon"
output: rmarkdown::html_vignette
author: 
  - name: "Adrian Timpson"
    affiliation: "UCL"
    email: "a.timpson@ucl.ac.uk"
vignette: >
  %\VignetteIndexEntry{get all sites within a polygon}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Function data.in.polugon doesn't exist, this could be run using a fake polygin made in sf

```{r eval=F}

library(BIADconnect)
#--------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------
# get all sites within a polygon
#--------------------------------------------------------------------------------------
#--------------------------------------------------------------------------------------
# Requirements first read:
# https://biadwiki.org/en/connectR
#--------------------------------------------------------------------------------------
conn  <-  init.conn()
#--------------------------------------------------------------------------------------
require(mapdata)
#--------------------------------------------------------------------------------------
# get all sites within a polygon
#--------------------------------------------------------------------------------------
x <- query.database("SELECT `Longitude`,`Latitude` FROM `BIAD`.`Sites`", conn=conn)
d <- data.in.polygon(data=x,kml.path='../tools/kml/square.kml')
#--------------------------------------------------------------------------------------
# look at the data
#--------------------------------------------------------------------------------------
xlim <- c(-10,50)
ylim <- c(40,60)
plot(NULL,xlim=xlim,ylim=ylim,frame.plot=F,axes=F, xlab='',ylab='',main='square')
map('world',xlim=xlim,ylim=ylim,col='grey90',add=T, fill=T, border='grey')
points(d$Longitude, d$Latitude, pch=16)
#--------------------------------------------------------------------------------------
disconnect()
#--------------------------------------------------------------------------------------
```
